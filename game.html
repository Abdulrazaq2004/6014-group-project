<!DOCTYPE html>
<html lang="ar" dir="rtl"> <!-- Arabic language, right-to-left direction -->
<head>
  <!-- Meta tags for character encoding and responsive design -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cyber6014 — Play</title>

  <!-- Firebase SDK scripts (compat version for backward support) -->
  <script src="https://www.gstatic.com/firebasejs/10.8.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.8.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.8.1/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.8.1/firebase-storage-compat.js"></script>

  <!-- External stylesheet -->
  <link rel="stylesheet" href="style.css" />
</head>

<body data-page="game">
  <!-- Header: Contains the title and user navigation -->
  <header class="site-header">
    <div class="header-left">
      <!-- Back button to return to the main menu -->
      <a class="header-btn" href="main.html">Return</a>
    </div>

    <!-- Game title -->
    <h1 class="site-title">Cyber6014</h1>

    <div class="header-right profile-menu">
      <!-- User avatar icon -->
      <img id="headerProfilePic" class="profile-icon" src="images/default-avatar.png" alt="Profile" />
      <!-- Dropdown menu for profile and sign out -->
      <nav id="profileDropdown" class="dropdown">
        <a href="profile.html">Profile</a>
        <button id="logoutBtn" type="button" class="danger">Sign Out</button>
      </nav>
    </div>
  </header>

  <!-- Main gameplay container -->
  <main class="game-wrap2">
    <!-- Sidebar with profile and scoring info -->
    <aside class="sidebar-info">
      <div id="profile-card">
        <img id="sidebar-profile-pic" src="images/default-avatar.png" alt="Profile Picture" />
        <div id="current-username">Loading...</div>
        <div class="score-display">
          Points: <span id="total-score">0</span>
        </div>
      </div>

      <!-- Legend for point system based on difficulty -->
      <div class="difficulty-legend">
        <h3>Awards (Points)</h3>
        <ul class="legend-list">
          <li>5 <span class="difficulty-level easy">Easy</span></li>
          <li>10 <span class="difficulty-level medium">Medium</span></li>
          <li>15 <span class="difficulty-level hard">Hard</span></li>
        </ul>
      </div>
    </aside>

    <!-- First screen: Category selection -->
    <section id="start-screen" class="main-content">
      <div id="start-intro">
        <h2 class="title">?Ready</h2>
        <p class="subtitle">Choose a category to start</p>
      </div>

      <!-- Grid of category buttons -->
      <div class="category-grid">
        <button class="category-btn" data-category="Phishing"> Phishing & Scam Messages</button>
        <button class="category-btn" data-category="Passwords & MFA">Passwords & MFA</button>
        <button class="category-btn" data-category="Public Wi-Fi & QR Codes">Public Wi-Fi & QR Codes</button>
        <button class="category-btn" data-category="Social Media Privacy & Oversharing">Social Media Privacy & Oversharing</button>
      </div>

      <!-- Appears after a category is selected -->
      <div id="difficulty-section" class="hidden" style="margin-top: 32px;">
        <!-- Displays selected category -->
        <h3 class="subtitle" id="selected-category-label"></h3>

        <!-- Difficulty selection options -->
        <div id="difficulty-selection" class="difficulty-row">
          <div class="difficulty-btn difficulty-easy" data-diff="easy">
              <span>easy</span>
              <img src="images/easy.png" class="diff-icon">
          </div>
          <div class="difficulty-btn difficulty-medium locked" data-diff="medium">
              <span>medium</span>
              <img src="images/mid.png" class="diff-icon">
          </div>
          <div class="difficulty-btn difficulty-hard locked" data-diff="hard">
              <span>hard</span>
              <img src="images/hard.png" class="diff-icon">
          </div>
        </div>

        <!-- Back button to return to categories -->
        <button id="back-to-cats" class="ghost" style="margin-top:18px;">
          ⬅ Back to categories
        </button>
      </div>
    </section>

    <!-- Second screen: Question display -->
    <section id="question-screen" class="main-content hidden">
      <div class="question-box">
        <!-- Shows selected category name -->
        <h2 id="current-category" class="title" style="margin-bottom:10px;"></h2>
        
        <!-- Actual question text -->
        <p id="current-question" class="question-text"></p>
        
        <!-- Area for images related to the question -->
        <div id="image-container" class="image-container"></div>
        <div id="question-image"></div>

        <!-- Answer options will be dynamically injected here -->
        <div id="answers-area" class="answers-grid"></div>

        <!-- Feedback after selecting answer -->
        <p id="feedback-message" class="feedback-text" style="min-height:36px;"></p>

        <!-- Navigation buttons -->
        <button id="next-question-btn" class="next-question-btn hidden">Continue</button> 
        <button id="back-btn" class="ghost">Categories</button>
      </div>
    </section>
  </main>

  <!-- Footer for copyright -->
  <footer class="site-footer">
    Cyber6014 – Developed with love by 6014 group © 2025
  </footer>

  <!-- Overlay to show explanation images for categories -->
  <div id="explanationOverlay" class="welcome-overlay hidden-welcome">
    <img id="explanationImage" src="images/Passwords & MFA-explain.png" alt="Category Explanation. Click to dismiss." />
  </div>

  <!-- JavaScript logic and data files -->
  <script src="js/questionsData.js"></script>
  <script src="js/config_and_helpers.js"></script>
  <script src="js/user_manager.js"></script>
  <script src="js/progress_manager.js"></script>
  <script src="js/game_logic.js"></script>
  <script src="js/ui_and_routing.js"></script>
</body>
</html>
